import{a as U,b as $}from"./chunk-S4FL77LE.js";import{a as R}from"./chunk-JPPMYTV5.js";import"./chunk-UPVBF2VF.js";import{C as B,f as D,h as T,i as z,j as A,l as V,p as H,s as N,z as j}from"./chunk-TVNTLNBO.js";import{C as m,D as o,E as n,F as u,L as b,M as x,N as g,X as i,Y as v,Z as P,ha as M,i as f,j as h,la as S,na as k,nb as E,oa as I,pa as w,q as l,sa as O,t as p,v as C,z as y}from"./chunk-36HGS4EL.js";import"./chunk-LUUFI6RM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-AHGHMOHV.js";import"./chunk-73NUNHON.js";import"./chunk-4MO7OQZX.js";import"./chunk-UDOB3VRE.js";import"./chunk-M2Y4VNJU.js";import"./chunk-74SSSF5Y.js";import"./chunk-N3KGO5P4.js";import"./chunk-7FY2OE2O.js";import"./chunk-J5AYYYYG.js";import"./chunk-FGNDF6E2.js";import"./chunk-FHHGKWYB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-ZZTMQJLL.js";import"./chunk-CKP3SGE2.js";import"./chunk-WER6QGNK.js";import"./chunk-WE77HQDE.js";import"./chunk-2GDOKXI3.js";import"./chunk-6O2VLVOF.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as _}from"./chunk-JHI3MBHO.js";function F(r,a){if(r&1){let d=b();o(0,"div",18)(1,"span",19),i(2),n(),o(3,"span",8),i(4,"Rh Positivo"),n(),o(5,"ion-button",20),x("click",function(){f(d);let e=g();return h(e.adicionarTipoSanguineo())}),i(6," (EDITAR) "),n()()}if(r&2){let d=g();l(2),v(d.tipoSanguineo)}}function L(r,a){if(r&1){let d=b();o(0,"div",21)(1,"ion-button",22),x("click",function(){f(d);let e=g();return h(e.adicionarTipoSanguineo())}),u(2,"ion-icon",23),i(3," Adicionar "),n()()}}var ne=(()=>{let a=class a{constructor(t,e,c){this.alertController=t,this.http=e,this.router=c,this.usuario={nome:"Carregando...",dataNascimento:"..."},this.tipoSanguineo=null}ngOnInit(){this.carregarDadosDoBanco()}ionViewWillEnter(){let t=localStorage.getItem("meu_tipo_sanguineo");t&&(this.tipoSanguineo=t)}carregarDadosDoBanco(){let t=localStorage.getItem("token");if(!t){console.error("Token n\xE3o encontrado. Usu\xE1rio n\xE3o logado."),this.router.navigate(["/login"]);return}let e=`${R}/users/profile/me`,c=new k({Authorization:`Bearer ${t}`});this.http.get(e,{headers:c}).subscribe({next:s=>{this.usuario.nome=s.name,this.usuario.dataNascimento=this.formatarData(s.birthDate)},error:s=>{console.error("Erro ao buscar dados do usu\xE1rio na API",s),this.usuario.nome="Erro ao carregar"}})}formatarData(t){if(!t)return"...";try{let e=t.split("T")[0].split("-");return`${e[2]}/${e[1]}/${e[0]}`}catch{return t}}adicionarTipoSanguineo(){return _(this,null,function*(){yield(yield this.alertController.create({header:"Adicionar Tipo Sangu\xEDneo",message:"Qual \xE9 o seu tipo sangu\xEDneo?",inputs:[{name:"tipo",type:"text",placeholder:"Ex: A+, O-"}],buttons:[{text:"Cancelar",role:"cancel"},{text:"Salvar",handler:e=>{e.tipo&&this.salvarLocalmente(e.tipo)}}]})).present()})}salvarLocalmente(t){this.tipoSanguineo=t.toUpperCase(),localStorage.setItem("meu_tipo_sanguineo",this.tipoSanguineo)}};a.\u0275fac=function(e){return new(e||a)(p(j),p(I),p(O))},a.\u0275cmp=C({type:a,selectors:[["app-doador"]],decls:30,vars:5,consts:[["titulo","Carteirinha de Doador"],[3,"fullscreen"],[1,"content-padding"],[1,"donor-card"],[1,"card-header"],[1,"card-content"],[1,"user-info"],[1,"user-name"],[1,"info-label"],[1,"ion-align-items-center"],["size","7"],[1,"barcode-container"],[1,"barcode-line"],[1,"barcode-line","short"],["size","5",1,"blood-type-col"],["class","blood-type-display",4,"ngIf"],["class","empty-blood-state",4,"ngIf"],[1,"card-footer"],[1,"blood-type-display"],[1,"blood-type-value"],["fill","clear","size","small",3,"click"],[1,"empty-blood-state"],["fill","outline",1,"add-blood-button",3,"click"],["slot","start","name","add"]],template:function(e,c){e&1&&(u(0,"app-simple-header",0),o(1,"ion-content",1)(2,"div",2)(3,"ion-card",3)(4,"div",4),i(5," FUNDA\xC7\xC3O HEMOPE "),n(),o(6,"div",5)(7,"div",6)(8,"ion-label",7),i(9),n(),o(10,"span",8),i(11),n()(),o(12,"ion-grid")(13,"ion-row",9)(14,"ion-col",10)(15,"div",11),u(16,"div",12)(17,"div",13)(18,"div",12)(19,"div",13)(20,"div",12)(21,"div",13)(22,"div",12),n(),o(23,"span",8),i(24,"Cod. Doador: 0001155797"),n()(),o(25,"ion-col",14),y(26,F,7,1,"div",15)(27,L,4,0,"div",16),n()()()(),o(28,"div",17),i(29," Valida apenas com documento de identidade "),n()()()()),e&2&&(l(),m("fullscreen",!0),l(8),v(c.usuario.nome),l(2),P("Data de Nascimento: ",c.usuario.dataNascimento),l(15),m("ngIf",c.tipoSanguineo),l(),m("ngIf",!c.tipoSanguineo))},dependencies:[S,M,E,w,A,T,V,N,D,z,B,H,$,U],styles:['@charset "UTF-8";ion-toolbar[_ngcontent-%COMP%]{--background: var(--app-color-header-bg)}ion-title[_ngcontent-%COMP%]{color:var(--app-color-primary-dark);font-weight:700}ion-back-button[_ngcontent-%COMP%]{color:var(--app-color-primary-dark)}ion-content[_ngcontent-%COMP%]{--background: var(--app-color-white)}.content-padding[_ngcontent-%COMP%]{padding:20px 16px}.donor-card[_ngcontent-%COMP%]{--background: var(--app-color-white);box-shadow:0 4px 12px #0000001a;border-radius:8px;margin:0}.card-header[_ngcontent-%COMP%]{background:var(--app-color-primary-medium);opacity:.3;padding:12px 16px;font-weight:700;color:var(--app-color-primary-dark);font-size:1.1em;opacity:1;background:#9adaff4d}.card-content[_ngcontent-%COMP%]{padding:16px}.card-footer[_ngcontent-%COMP%]{background:#f9f9f9;padding:12px 16px;text-align:center;font-size:.8em;color:#666}.user-info[_ngcontent-%COMP%]{margin-bottom:24px}.user-name[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700;color:var(--app-color-primary-dark);display:block;white-space:normal;margin-bottom:4px}.info-label[_ngcontent-%COMP%]{display:block;font-size:.85em;color:#666}.barcode-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start;gap:4px;align-items:flex-end;height:40px;margin-bottom:8px}.barcode-container[_ngcontent-%COMP%]   .barcode-line[_ngcontent-%COMP%]{width:4px;height:100%;background-color:#000}.barcode-container[_ngcontent-%COMP%]   .barcode-line.short[_ngcontent-%COMP%]{height:60%}.blood-type-col[_ngcontent-%COMP%]{text-align:center;display:flex;flex-direction:column;align-items:center;justify-content:center}.blood-type-value[_ngcontent-%COMP%]{font-size:3em;font-weight:900;color:var(--app-color-primary-dark);line-height:1;display:block}.add-blood-button[_ngcontent-%COMP%]{--border-radius: 8px;font-size:.7em;height:30px}']});let r=a;return r})();export{ne as DoadorPage};
