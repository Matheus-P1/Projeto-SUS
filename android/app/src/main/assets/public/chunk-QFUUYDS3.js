import{a as te}from"./chunk-JPPMYTV5.js";import{B as Z,I as $,J as ee,c as Y,e as J,m as K,q as Q,s as W,u as X}from"./chunk-UPVBF2VF.js";import{C as l,D as r,E as n,F as d,M as C,X as i,db as c,e as y,eb as j,fa as O,fb as A,ha as q,hb as B,ib as G,jb as R,la as k,mb as V,nb as H,oa as D,ob as U,pa as z,q as s,sa as L,t as _,v as N,w as S,xa as I,z as p}from"./chunk-36HGS4EL.js";import"./chunk-LUUFI6RM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-AHGHMOHV.js";import"./chunk-73NUNHON.js";import"./chunk-4MO7OQZX.js";import"./chunk-M2Y4VNJU.js";import"./chunk-74SSSF5Y.js";import"./chunk-N3KGO5P4.js";import"./chunk-7FY2OE2O.js";import"./chunk-J5AYYYYG.js";import"./chunk-FGNDF6E2.js";import"./chunk-FHHGKWYB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-ZZTMQJLL.js";import"./chunk-CKP3SGE2.js";import"./chunk-WER6QGNK.js";import"./chunk-WE77HQDE.js";import"./chunk-2GDOKXI3.js";import"./chunk-6O2VLVOF.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{d as M,e as T}from"./chunk-JHI3MBHO.js";function ie(t,o){t&1&&(r(0,"p",21),i(1,"Nome \xE9 obrigat\xF3rio."),n())}function ae(t,o){t&1&&(r(0,"p",21),i(1,"Email \xE9 obrigat\xF3rio."),n())}function se(t,o){t&1&&(r(0,"p",21),i(1,"Email inv\xE1lido."),n())}function le(t,o){t&1&&(r(0,"p",21),i(1,"Data de nascimento \xE9 obrigat\xF3ria."),n())}function me(t,o){t&1&&(r(0,"p",21),i(1,"CNS \xE9 obrigat\xF3rio."),n())}function de(t,o){t&1&&(r(0,"p",21),i(1,"CPF \xE9 obrigat\xF3rio."),n())}function ce(t,o){t&1&&(r(0,"p",21),i(1,"Telefone \xE9 obrigat\xF3rio."),n())}function pe(t,o){t&1&&(r(0,"p",21),i(1,"Senha \xE9 obrigat\xF3ria."),n())}function ue(t,o){t&1&&(r(0,"p",21),i(1,"A senha deve ter no m\xEDnimo 8 caracteres."),n())}function fe(t,o){t&1&&(r(0,"p",21),i(1,"Confirme sua senha."),n())}function ge(t,o){t&1&&(r(0,"p",21),i(1,"As senhas n\xE3o conferem."),n())}function he(t,o){t&1&&(r(0,"span"),i(1,"Cadastrar"),n())}function _e(t,o){t&1&&d(0,"ion-spinner")}var Ce=t=>{let o=t.get("senha"),x=t.get("confirmarSenha");return o&&x&&o.value!==x.value?{senhasNaoConferem:!0}:null},ne=(()=>{let o=class o{constructor(f,a,e,m,u){this.location=f,this.fb=a,this.http=e,this.router=m,this.toastController=u,this.isLoading=!1,this.showPassword=!1,this.passwordIcon="eye-off-outline",this.showConfirmPassword=!1,this.confirmPasswordIcon="eye-off-outline"}ngOnInit(){this.cadastroForm=this.fb.group({nome:["",[c.required]],email:["",[c.required,c.email]],dataDeNascimento:["",[c.required]],cns:["",[c.required]],cpf:["",[c.required]],telefone:["",[c.required]],senha:["",[c.required,c.minLength(8)]],confirmarSenha:["",[c.required]]},{validators:Ce})}togglePassword(){this.showPassword=!this.showPassword,this.showPassword?this.passwordIcon="eye-outline":this.passwordIcon="eye-off-outline"}toggleConfirmPassword(){this.showConfirmPassword=!this.showConfirmPassword,this.showConfirmPassword?this.confirmPasswordIcon="eye-outline":this.confirmPasswordIcon="eye-off-outline"}goBack(){this.location.back()}fazerCadastro(){if(this.cadastroForm.invalid){if(this.cadastroForm.get("nome")?.hasError("required")&&this.cadastroForm.get("email")?.hasError("required")&&this.cadastroForm.get("dataDeNascimento")?.hasError("required")&&this.cadastroForm.get("cns")?.hasError("required")&&this.cadastroForm.get("cpf")?.hasError("required")&&this.cadastroForm.get("telefone")?.hasError("required")&&this.cadastroForm.get("senha")?.hasError("required")&&this.cadastroForm.get("confirmarSenha")?.hasError("required")){this.presentarToast("Por favor, preencha todos os campos","danger");return}if(this.cadastroForm.get("nome")?.hasError("required")){this.presentarToast("Por favor, insira um nome v\xE1lido","danger");return}if(this.cadastroForm.get("email")?.hasError("email")||this.cadastroForm.get("email")?.hasError("required")){this.presentarToast("Por favor, insira um email v\xE1lido","danger");return}if(this.cadastroForm.get("dataDeNascimento")?.hasError("required")){this.presentarToast("Por favor, insira uma data de nascimento v\xE1lida","danger");return}if(this.cadastroForm.get("cns")?.hasError("required")){this.presentarToast("Por favor, insira um CNS v\xE1lido","danger");return}if(this.cadastroForm.get("cpf")?.hasError("required")){this.presentarToast("Por favor, insira um CPF v\xE1lido","danger");return}if(this.cadastroForm.get("telefone")?.hasError("required")){this.presentarToast("Por favor, insira um telefone v\xE1lido","danger");return}if(this.cadastroForm.get("senha")?.hasError("minlength")){this.presentarToast("A senha deve ter no m\xEDnimo 8 caracteres","danger");return}if(this.cadastroForm.errors?.senhasNaoConferem){this.presentarToast("As senhas n\xE3o conferem","danger");return}}let u=this.cadastroForm.value,{confirmarSenha:f}=u,a=M(u,["confirmarSenha"]),e={name:a.nome,email:a.email,password:a.senha,cns:a.cns,cpf:a.cpf,phone:a.telefone,birthDate:new Date(a.dataDeNascimento).toISOString().split("T")[0]},m=te+"/auth/register";this.isLoading=!0,this.http.post(m,e).subscribe({next:g=>{this.isLoading=!1,this.presentarToast("Cadastro realizado com sucesso!","success"),this.router.navigate(["/login"])},error:g=>{this.isLoading=!1;let h=g.error?.message||"Erro ao realizar cadastro. Tente novamente.";this.presentarToast(h,"danger")}})}presentarToast(f,a){return T(this,null,function*(){yield(yield this.toastController.create({message:f,duration:3e3,position:"top",color:a})).present()})}};o.\u0275fac=function(a){return new(a||o)(_(O),_(V),_(D),_(L),_($))},o.\u0275cmp=N({type:o,selectors:[["app-cadastro"]],standalone:!1,decls:57,vars:19,consts:[[1,"cadastro-content"],[1,"content-card"],[1,"custom-header"],["fill","clear",1,"custom-back-button",3,"click"],["slot","icon-only","name","arrow-back"],[1,"page-title"],[3,"ngSubmit","formGroup"],[1,"form-container"],[1,"form-field"],["id","nome","formControlName","nome","type","text",1,"custom-input"],["class","erro-msg",4,"ngIf"],["id","email","formControlName","email","type","email",1,"custom-input"],["id","dataDeNascimento","formControlName","dataDeNascimento","type","date",1,"custom-input"],["id","cns","formControlName","cns","type","text",1,"custom-input"],["id","cpf","formControlName","cpf","type","text",1,"custom-input"],["id","telefone","formControlName","telefone","type","tel",1,"custom-input"],["id","senha","formControlName","senha",1,"custom-input",3,"type"],["aria-label","Mostrar/ocultar senha",1,"password-icon",3,"click","name"],["id","confirmarSenha","formControlName","confirmarSenha",1,"custom-input",3,"type"],["type","submit","expand","block",1,"register-button",3,"disabled"],[4,"ngIf"],[1,"erro-msg"]],template:function(a,e){if(a&1&&(r(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-button",3),C("click",function(){return e.goBack()}),d(4,"ion-icon",4),n(),r(5,"h1",5),i(6,"Cadastro"),n()(),r(7,"form",6),C("ngSubmit",function(){return e.fazerCadastro()}),r(8,"div",7)(9,"div",8)(10,"ion-label"),i(11,"Nome:"),n(),d(12,"ion-input",9),p(13,ie,2,0,"p",10),n(),r(14,"div",8)(15,"ion-label"),i(16,"Email:"),n(),d(17,"ion-input",11),p(18,ae,2,0,"p",10)(19,se,2,0,"p",10),n(),r(20,"div",8)(21,"ion-label"),i(22,"Data de Nascimento:"),n(),d(23,"ion-input",12),p(24,le,2,0,"p",10),n(),r(25,"div",8)(26,"ion-label"),i(27,"CNS:"),n(),d(28,"ion-input",13),p(29,me,2,0,"p",10),n(),r(30,"div",8)(31,"ion-label"),i(32,"CPF:"),n(),d(33,"ion-input",14),p(34,de,2,0,"p",10),n(),r(35,"div",8)(36,"ion-label"),i(37,"Telefone:"),n(),d(38,"ion-input",15),p(39,ce,2,0,"p",10),n(),r(40,"div",8)(41,"ion-label"),i(42,"Senha:"),n(),d(43,"ion-input",16),r(44,"ion-icon",17),C("click",function(){return e.togglePassword()}),n(),p(45,pe,2,0,"p",10)(46,ue,2,0,"p",10),n(),r(47,"div",8)(48,"ion-label"),i(49,"Confirme a senha:"),n(),d(50,"ion-input",18),r(51,"ion-icon",17),C("click",function(){return e.toggleConfirmPassword()}),n(),p(52,fe,2,0,"p",10)(53,ge,2,0,"p",10),n()(),r(54,"ion-button",19),p(55,he,2,0,"span",20)(56,_e,1,0,"ion-spinner",20),n()()()()),a&2){let m,u,g,h,v,P,E,F,b,w;s(7),l("formGroup",e.cadastroForm),s(6),l("ngIf",((m=e.cadastroForm.get("nome"))==null?null:m.touched)&&((m=e.cadastroForm.get("nome"))==null?null:m.invalid)),s(5),l("ngIf",((u=e.cadastroForm.get("email"))==null?null:u.touched)&&((u=e.cadastroForm.get("email"))==null?null:u.hasError("required"))),s(),l("ngIf",((g=e.cadastroForm.get("email"))==null?null:g.touched)&&((g=e.cadastroForm.get("email"))==null?null:g.hasError("email"))),s(5),l("ngIf",((h=e.cadastroForm.get("dataDeNascimento"))==null?null:h.touched)&&((h=e.cadastroForm.get("dataDeNascimento"))==null?null:h.invalid)),s(5),l("ngIf",((v=e.cadastroForm.get("cns"))==null?null:v.touched)&&((v=e.cadastroForm.get("cns"))==null?null:v.invalid)),s(5),l("ngIf",((P=e.cadastroForm.get("cpf"))==null?null:P.touched)&&((P=e.cadastroForm.get("cpf"))==null?null:P.invalid)),s(5),l("ngIf",((E=e.cadastroForm.get("telefone"))==null?null:E.touched)&&((E=e.cadastroForm.get("telefone"))==null?null:E.invalid)),s(4),l("type",e.showPassword?"text":"password"),s(),l("name",e.passwordIcon),s(),l("ngIf",((F=e.cadastroForm.get("senha"))==null?null:F.touched)&&((F=e.cadastroForm.get("senha"))==null?null:F.hasError("required"))),s(),l("ngIf",((b=e.cadastroForm.get("senha"))==null?null:b.touched)&&((b=e.cadastroForm.get("senha"))==null?null:b.hasError("minlength"))),s(4),l("type",e.showConfirmPassword?"text":"password"),s(),l("name",e.confirmPasswordIcon),s(),l("ngIf",((w=e.cadastroForm.get("confirmarSenha"))==null?null:w.touched)&&((w=e.cadastroForm.get("confirmarSenha"))==null?null:w.invalid)),s(),l("ngIf",e.cadastroForm.touched&&(e.cadastroForm.errors==null?null:e.cadastroForm.errors.senhasNaoConferem)),s(),l("disabled",e.cadastroForm.invalid||e.isLoading),s(),l("ngIf",!e.isLoading),s(),l("ngIf",e.isLoading)}},dependencies:[q,B,j,A,J,K,Q,W,X,Z,Y,G,R],styles:['@charset "UTF-8";[_nghost-%COMP%]   ion-content.cadastro-content[_ngcontent-%COMP%]{--background: #85c9f2;padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}[_nghost-%COMP%]   .content-card[_ngcontent-%COMP%]{background-color:#fff;border-top-left-radius:60px;box-shadow:0 -4px 10px #0000001a;margin-top:120px;padding:25px;width:100%;display:flex;flex-direction:column;min-height:calc(100vh - env(safe-area-inset-top))}[_nghost-%COMP%]   .custom-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:relative;width:100%;margin-bottom:20px}[_nghost-%COMP%]   .page-title[_ngcontent-%COMP%]{color:#036;font-size:2.1rem;font-weight:800;text-align:center}[_nghost-%COMP%]   .custom-back-button[_ngcontent-%COMP%]{position:absolute;left:0;top:50%;transform:translateY(-50%);--color: #003366;font-size:1.5rem}[_nghost-%COMP%]   .form-container[_ngcontent-%COMP%]{margin-top:10px;width:100%}[_nghost-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:14px;text-align:left;position:relative}[_nghost-%COMP%]   .form-field[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:15px;font-weight:600;color:#036;margin-bottom:4px;display:block}[_nghost-%COMP%]   .custom-input[_ngcontent-%COMP%]{--background: #f2f2f8;border-radius:8px;height:48px;padding:8px;font-size:16px;--color: #000000;--placeholder-color: #999999}[_nghost-%COMP%]   .register-button[_ngcontent-%COMP%]{--background: #85c9f2;--color: #003366;font-weight:700;border-radius:8px;height:46px;font-size:16px;text-transform:none;margin-top:20px}[_nghost-%COMP%]   .password-icon[_ngcontent-%COMP%]{position:absolute;bottom:12px;right:12px;z-index:10;font-size:1.4rem;color:#888}[_nghost-%COMP%]   .erro-msg[_ngcontent-%COMP%]{color:#e63946;font-size:13px;margin-top:4px;font-weight:700}[_nghost-%COMP%]   .form-field[_ngcontent-%COMP%]   ion-input.ng-invalid.ng-touched[_ngcontent-%COMP%]{--border-color: #e63946 !important;border:2px solid #e63946!important;border-radius:8px}[_nghost-%COMP%]   .form-field[_ngcontent-%COMP%]   ion-input.ng-invalid.ng-touched[_ngcontent-%COMP%]::part(native){background:#f2f2f8!important}']});let t=o;return t})();var ve=[{path:"",component:ne}],re=(()=>{let o=class o{};o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=S({type:o}),o.\u0275inj=y({imports:[I.forChild(ve),I]});let t=o;return t})();var Ae=(()=>{let o=class o{};o.\u0275fac=function(a){return new(a||o)},o.\u0275mod=S({type:o}),o.\u0275inj=y({imports:[k,H,ee,re,U,z]});let t=o;return t})();export{Ae as CadastroPageModule};
