import{a as Y,b as Z}from"./chunk-S4FL77LE.js";import{C as F,F as T,K as ae,a as w,b as ee,e as te,j as k,w as E}from"./chunk-VMX52DQL.js";import"./chunk-UPVBF2VF.js";import{B as X,C as O,c as $,d as U,f as y,j as I,k as W,n as H,o as R,p as q,q as Q,w as K,x as S}from"./chunk-TVNTLNBO.js";import{$ as L,C as d,D as i,E as r,F as m,L as _,M as g,N as h,X as c,Y as v,Z as z,aa as N,ba as j,d as D,eb as B,ga as M,gb as G,ha as J,i as p,j as f,la as P,nb as A,q as s,t as x,v as b,z as u}from"./chunk-36HGS4EL.js";import"./chunk-LUUFI6RM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-AHGHMOHV.js";import"./chunk-73NUNHON.js";import"./chunk-4MO7OQZX.js";import"./chunk-UDOB3VRE.js";import"./chunk-M2Y4VNJU.js";import"./chunk-74SSSF5Y.js";import"./chunk-N3KGO5P4.js";import"./chunk-7FY2OE2O.js";import"./chunk-J5AYYYYG.js";import"./chunk-FGNDF6E2.js";import"./chunk-FHHGKWYB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-ZZTMQJLL.js";import"./chunk-CKP3SGE2.js";import"./chunk-WER6QGNK.js";import"./chunk-WE77HQDE.js";import"./chunk-2GDOKXI3.js";import"./chunk-6O2VLVOF.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as V}from"./chunk-JHI3MBHO.js";var oe=[{id:"alimentar",titulo:"Alimentar",icone:"nutrition",itens:[{nome:"Leite e derivados",marcado:!1},{nome:"Ovos",marcado:!1},{nome:"Trigo (Gl\xFAten)",marcado:!1},{nome:"Soja",marcado:!1},{nome:"Amendoim",marcado:!1},{nome:"Castanhas e nozes",marcado:!1},{nome:"Peixes",marcado:!1},{nome:"Crust\xE1ceos (camar\xE3o, caranguejo)",marcado:!1},{nome:"Milho",marcado:!1},{nome:"Frutas c\xEDtricas",marcado:!1}]},{id:"animais",titulo:"Animais (Insetos/Outros)",icone:"bug",itens:[{nome:"Picada de Abelha",marcado:!1},{nome:"Picada de Vespa",marcado:!1},{nome:"Picada de Formiga",marcado:!1},{nome:"P\xEAlo de Gato",marcado:!1},{nome:"P\xEAlo de Cachorro",marcado:!1},{nome:"\xC1caros",marcado:!1},{nome:"Baratas",marcado:!1},{nome:"L\xE3",marcado:!1},{nome:"Penas",marcado:!1},{nome:"Saliva de animais",marcado:!1}]},{id:"medicamentos",titulo:"Medicamentos",icone:"medkit",itens:[{nome:"Penicilina",marcado:!1},{nome:"Aspirina (AAS)",marcado:!1},{nome:"Ibuprofeno",marcado:!1},{nome:"Dipirona",marcado:!1},{nome:"Sulfas",marcado:!1},{nome:"Anest\xE9sicos locais",marcado:!1},{nome:"Contraste iodado",marcado:!1},{nome:"Insulina",marcado:!1},{nome:"Anticonvulsivantes",marcado:!1},{nome:"Quimioter\xE1picos",marcado:!1}]},{id:"ambientais",titulo:"Ambientais",icone:"flower",itens:[{nome:"P\xF3len",marcado:!1},{nome:"Mofo/Fungos",marcado:!1},{nome:"Poeira",marcado:!1},{nome:"L\xE1tex",marcado:!1},{nome:"Perfumes fortes",marcado:!1},{nome:"Fuma\xE7a de cigarro",marcado:!1},{nome:"Polui\xE7\xE3o",marcado:!1},{nome:"Cloro",marcado:!1},{nome:"Produtos de limpeza",marcado:!1},{nome:"Metais (N\xEDquel, etc.)",marcado:!1}]}];function ce(o,a){if(o&1){let n=_();i(0,"ion-item")(1,"ion-label",14),c(2),r(),i(3,"ion-checkbox",15),j("ngModelChange",function(e){let l=p(n).$implicit;return N(l.marcado,e)||(l.marcado=e),f(e)}),r()()}if(o&2){let n=a.$implicit;s(2),v(n.nome),s(),L("ngModel",n.marcado)}}function de(o,a){if(o&1&&(i(0,"ion-accordion",8)(1,"ion-item",9),m(2,"ion-icon",10),i(3,"ion-label"),c(4),r()(),i(5,"div",11)(6,"ion-list",12),u(7,ce,4,2,"ion-item",13),r()()()),o&2){let n=a.$implicit;d("value",n.id),s(2),d("name",n.icone),s(2),v(n.titulo),s(3),d("ngForOf",n.itens)}}var ne=(()=>{let a=class a{constructor(t){this.modalCtrl=t,this.alergiasPreSelecionadas=[],this.categorias=JSON.parse(JSON.stringify(oe)),w({nutrition:T,bug:k,medkit:F,flower:E})}ngOnInit(){this.alergiasPreSelecionadas&&this.alergiasPreSelecionadas.length>0&&this.marcarItensJaSalvos()}marcarItensJaSalvos(){this.categorias.forEach(t=>{t.itens.forEach(e=>{this.alergiasPreSelecionadas.some(C=>C.nome===e.nome&&C.categoria===t.titulo)&&(e.marcado=!0)})})}cancelar(){this.modalCtrl.dismiss(null,"cancel")}salvar(){let t=[];return this.categorias.forEach(e=>{e.itens.forEach(l=>{l.marcado&&t.push({categoria:e.titulo,nome:l.nome})})}),this.modalCtrl.dismiss(t,"confirm")}};a.\u0275fac=function(e){return new(e||a)(x(S))},a.\u0275cmp=b({type:a,selectors:[["app-alergias-modal"]],inputs:{alergiasPreSelecionadas:"alergiasPreSelecionadas"},decls:15,vars:1,consts:[[1,"ion-padding","modal-content"],[1,"modal-header"],["expand","inset",1,"allergy-accordions"],[3,"value",4,"ngFor","ngForOf"],[1,"ion-no-border"],[1,"footer-buttons"],["fill","clear",1,"btn-cancelar",3,"click"],["shape","round",1,"btn-salvar",3,"click"],[3,"value"],["slot","header","lines","none"],["slot","start","color","medium",3,"name"],["slot","content",1,"ion-padding-horizontal"],["lines","none"],[4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["slot","end",3,"ngModelChange","ngModel"]],template:function(e,l){e&1&&(i(0,"ion-content",0)(1,"div",1)(2,"h2"),c(3,"Adicionar Alergias"),r(),i(4,"p"),c(5,"Selecione um grupo de alergias."),r()(),i(6,"ion-accordion-group",2),u(7,de,8,4,"ion-accordion",3),r(),i(8,"ion-footer",4)(9,"ion-toolbar")(10,"div",5)(11,"ion-button",6),g("click",function(){return l.cancelar()}),c(12," Cancelar "),r(),i(13,"ion-button",7),g("click",function(){return l.salvar()}),c(14," Salvar "),r()()()()()),e&2&&(s(7),d("ngForOf",l.categorias))},dependencies:[P,M,A,B,G,I,W,K,y,$,U,R,O,q,Q,X],styles:[".modal-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px;padding-top:16px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--app-color-primary-dark, #003366);font-weight:700;font-size:1.4rem;margin-bottom:8px}.modal-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#999;font-size:.9rem;margin:0}.allergy-accordions[_ngcontent-%COMP%]   ion-accordion[_ngcontent-%COMP%]{margin-bottom:12px;border:1px solid #e0e0e0;border-radius:8px!important;background:#fff}.allergy-accordions[_ngcontent-%COMP%]   ion-accordion.accordion-expanded[_ngcontent-%COMP%]{border-color:var(--ion-color-primary, #3880ff)}.allergy-accordions[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--inner-padding-end: 0}.footer-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:0 16px 16px;margin-top:35px}.footer-buttons[_ngcontent-%COMP%]   .btn-cancelar[_ngcontent-%COMP%]{color:var(--app-color-primary-dark, #003366);text-transform:none;font-weight:600}.footer-buttons[_ngcontent-%COMP%]   .btn-salvar[_ngcontent-%COMP%]{--background: var(--ion-color-primary, #3880ff);text-transform:none;font-weight:600;width:120px}"]});let o=a;return o})();var re=(()=>{let a=class a{constructor(){}getChaveUsuario(){let t=localStorage.getItem("userId_logado");return`alergias_${t||"visitante"}`}salvarAlergias(t){let e=this.getChaveUsuario();localStorage.setItem(e,JSON.stringify(t)),console.log(`Dados salvos na gaveta (${e}):`,t)}carregarAlergias(){let t=this.getChaveUsuario(),e=localStorage.getItem(t);return e?JSON.parse(e):[]}limparDadosLocais(){let t=this.getChaveUsuario();localStorage.removeItem(t)}};a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=D({token:a,factory:a.\u0275fac,providedIn:"root"});let o=a;return o})();function ge(o,a){if(o&1){let n=_();i(0,"div",7)(1,"p",8),c(2," Ao adicionar alergias, os profissionais de sa\xFAde poder\xE3o visualizar as informa\xE7\xF5es registradas no seu pr\xF3ximo atendimento. "),r(),i(3,"ion-button",9),g("click",function(){p(n);let e=h();return f(e.abrirModalAlergias())}),m(4,"ion-icon",10),c(5," Adicionar Alergias "),r()()}}function pe(o,a){if(o&1){let n=_();i(0,"div",15)(1,"div",16),m(2,"ion-icon",17),r(),i(3,"div",18)(4,"span",19),c(5),r(),i(6,"span",20),c(7),r()(),i(8,"ion-button",21),g("click",function(){let e=p(n).$implicit,l=h(2);return f(l.removerAlergia(e))}),m(9,"ion-icon",22),r()()}if(o&2){let n=a.$implicit,t=h(2);s(2),d("name",t.getIconeCategoria(n.categoria)),s(3),v(n.nome),s(2),v(n.categoria)}}function fe(o,a){if(o&1){let n=_();i(0,"div",11)(1,"div",12),u(2,pe,10,3,"div",13),r(),i(3,"ion-button",14),g("click",function(){p(n);let e=h();return f(e.abrirModalAlergias())}),c(4," Editar Alergias "),r()()}if(o&2){let n=h();s(2),d("ngForOf",n.alergiasCadastradas)}}var Fe=(()=>{let a=class a{constructor(t,e){this.modalCtrl=t,this.alergiaService=e,this.alergiasCadastradas=[],w({add:ee,nutrition:T,medkit:F,alertCircle:te,bug:k,flower:E,trashOutline:ae})}ionViewWillEnter(){this.alergiasCadastradas=this.alergiaService.carregarAlergias()}abrirModalAlergias(){return V(this,null,function*(){let t=yield this.modalCtrl.create({component:ne,breakpoints:[0,.5,.65,1],initialBreakpoint:.5,handle:!0,componentProps:{alergiasPreSelecionadas:this.alergiasCadastradas}});t.onDidDismiss().then(e=>{e.role==="confirm"&&e.data&&(this.alergiasCadastradas=e.data,this.alergiaService.salvarAlergias(this.alergiasCadastradas))}),yield t.present()})}removerAlergia(t){this.alergiasCadastradas=this.alergiasCadastradas.filter(e=>e!==t),this.alergiaService.salvarAlergias(this.alergiasCadastradas)}getIconeCategoria(t){let e=t.toLowerCase();return e.includes("alimentar")?"nutrition":e.includes("medicamentos")?"medkit":e.includes("animais")||e.includes("insetos")?"bug":e.includes("ambientais")?"flower":"alert-circle"}};a.\u0275fac=function(e){return new(e||a)(x(S),x(re))},a.\u0275cmp=b({type:a,selectors:[["app-alergias"]],decls:8,vars:4,consts:[["titulo","Minhas Alergias"],[3,"fullscreen"],[1,"content-container"],["src","assets/icon/alergia.png","alt","Ilustra\xE7\xE3o de Alergia",1,"main-image"],[1,"main-title"],["class","empty-state",4,"ngIf"],["class","list-state",4,"ngIf"],[1,"empty-state"],[1,"description-text"],["expand","full",1,"add-button",3,"click"],["name","add","slot","start"],[1,"list-state"],[1,"cards-grid"],["class","alergia-card",4,"ngFor","ngForOf"],["expand","block","fill","outline",1,"btn-editar",3,"click"],[1,"alergia-card"],[1,"card-icon-wrapper"],[3,"name"],[1,"card-content"],[1,"alergia-nome"],[1,"alergia-grupo"],["fill","clear","color","medium",3,"click"],["name","trash-outline","slot","icon-only"]],template:function(e,l){e&1&&(m(0,"app-simple-header",0),i(1,"ion-content",1)(2,"div",2),m(3,"ion-img",3),i(4,"h2",4),c(5),r(),u(6,ge,6,0,"div",5)(7,fe,5,1,"div",6),r()()),e&2&&(s(),d("fullscreen",!0),s(4),z(" ",l.alergiasCadastradas.length>0?"Minhas Alergias":"Voc\xEA ainda n\xE3o possui alergias cadastradas."," "),s(),d("ngIf",l.alergiasCadastradas.length===0),s(),d("ngIf",l.alergiasCadastradas.length>0))},dependencies:[P,M,J,A,I,y,O,H,Z,Y],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: var(--app-color-header-bg, #f0f8ff)}ion-title[_ngcontent-%COMP%], ion-back-button[_ngcontent-%COMP%]{color:var(--app-color-primary-dark, #003366);font-weight:700}ion-content[_ngcontent-%COMP%]{--background: var(--app-color-white, #ffffff)}.content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;min-height:100%;padding:32px 24px}.main-image[_ngcontent-%COMP%]{width:180px;max-width:50%;height:auto;margin-bottom:24px}.main-title[_ngcontent-%COMP%]{font-size:1.4em;font-weight:700;color:var(--app-color-primary-dark, #003366);margin-bottom:16px;text-align:center;line-height:1.3}.empty-state[_ngcontent-%COMP%]{text-align:center;width:100%}.description-text[_ngcontent-%COMP%]{font-size:.95em;color:#555;line-height:1.5;margin-bottom:40px;text-align:center}.add-button[_ngcontent-%COMP%]{--background: var(--app-color-primary-medium, #9ADAFF);--color: var(--app-color-primary-dark, #003366);--border-radius: 8px;font-weight:700;height:50px;text-transform:none;font-size:1.1em}.list-state[_ngcontent-%COMP%]{width:100%}.cards-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:32px;width:100%}.alergia-card[_ngcontent-%COMP%]{background:#f9f9f9;border:1px solid #e0e0e0;border-left:4px solid var(--app-color-card-border);border-radius:12px;padding:16px;display:flex;align-items:center;transition:all .2s ease}.card-icon-wrapper[_ngcontent-%COMP%]{background:var(--app-color-white, #fff);min-width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-right:16px;border:1px solid var(--app-color-primary-medium, #9ADAFF)}.card-icon-wrapper[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:22px;color:var(--app-color-primary-dark, #003366)}.card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;overflow:hidden;flex:1}.alergia-nome[_ngcontent-%COMP%]{font-weight:700;color:var(--app-color-primary-dark, #003366);font-size:1rem;margin-bottom:4px}.alergia-grupo[_ngcontent-%COMP%]{font-size:.8rem;color:#666;text-transform:uppercase;letter-spacing:.5px}.btn-editar[_ngcontent-%COMP%]{--color: var(--app-color-primary-dark, #003366);--border-color: var(--app-color-primary-medium, #9ADAFF);--border-width: 2px;font-weight:700;text-transform:none}"]});let o=a;return o})();export{Fe as AlergiasPage};
