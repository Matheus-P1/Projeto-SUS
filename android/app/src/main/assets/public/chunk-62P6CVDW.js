import{a as U}from"./chunk-JPPMYTV5.js";import{a as j,b as B}from"./chunk-NAUJWIPZ.js";import{C as V,h as $,i as y,j as F,k as D,l as N,m as z,o as A,p as T,s as H}from"./chunk-TVNTLNBO.js";import{C as p,D as t,E as o,F as g,L as v,M,N as b,X as i,Y as d,ga as I,i as h,j as C,la as P,na as O,nb as S,oa as w,pa as k,q as a,sa as E,t as u,v as x,z as _}from"./chunk-36HGS4EL.js";import"./chunk-UDOB3VRE.js";import"./chunk-WE77HQDE.js";import"./chunk-2GDOKXI3.js";import"./chunk-6O2VLVOF.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-JHI3MBHO.js";function R(m,l){if(m&1){let s=v();t(0,"ion-col",7)(1,"ion-card",14),M("click",function(){let n=h(s).$implicit,r=b();return C(r.onActionClick(n.route))}),t(2,"div",15)(3,"div",16),g(4,"ion-icon",17),o(),t(5,"div",18)(6,"ion-label"),i(7),o()()()()()}if(m&2){let s=l.$implicit;a(),p("disabled",s.disabled),a(3),p("name",s.icon),a(3),d(s.name)}}var ne=(()=>{let l=class l{constructor(e,n){this.router=e,this.http=n,this.userInfo={nome:"Carregando...",cns:"Carregando...",cpf:"...",dataNascimento:"...",telefone:"...",racaCor:"...",sexo:"...",email:"Carregando..."},this.actionItems=[{id:"cartao-vacina",name:"Cart\xE3o de vacina",icon:"document-attach-outline",route:"/cartao-vacina",disabled:!0},{id:"carteirinha-doador",name:"Carteirinha de doador",icon:"card-outline",route:"/doador"},{id:"medicamentos",name:"Meus medicamentos",icon:"medkit-outline",route:"/medicamentos"},{id:"alergias",name:"Minhas Alergias",icon:"bug-outline",route:"/alergias"},{id:"diario",name:"Di\xE1rio da sa\xFAde",icon:"book-outline",route:"/diario-saude"}]}ngOnInit(){this.carregarDadosUsuario()}carregarDadosUsuario(){let e=localStorage.getItem("token");if(!e){console.error("Usu\xE1rio n\xE3o logado! Token n\xE3o encontrado."),this.router.navigate(["/login"]);return}let n=`${U}/users/profile/me`,r=new O({Authorization:`Bearer ${e}`});this.http.get(n,{headers:r}).subscribe({next:c=>{let f=this.formatarDadosParaVisualizacao({cns:c.cns,cpf:c.cpf,telefone:c.phone,dataNascimento:c.birthDate});this.userInfo.nome=c.name,this.userInfo.cns=f.cnsFormatado,this.userInfo.cpf=f.cpfFormatado,this.userInfo.email=c.email,this.userInfo.telefone=f.telefoneFormatado,this.userInfo.dataNascimento=f.dataNascimentoFormatado,this.userInfo.sexo=c.sexo||"N\xE3o informado",this.userInfo.racaCor=c.racaCor||"N\xE3o informada"},error:c=>{console.error("Erro ao buscar dados do usu\xE1rio",c),this.userInfo.nome="Erro ao carregar dados"}})}formatarCpf(e){if(!e)return"";let n=e.replace(/\D/g,"");return n.length!==11?e:n.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")}formatarCns(e){if(!e)return"";let n=e.replace(/\D/g,"");return n.length!==15?e:n.replace(/(\d{3})(\d{4})(\d{4})(\d{4})/,"$1 $2 $3 $4")}formatarTelefone(e){if(!e)return"";let n=e.replace(/\D/g,"");return n.length===11?n.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):n.length===10?n.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):e}formatarDadosParaVisualizacao(e){return{cnsFormatado:this.formatarCns(e.cns),cpfFormatado:this.formatarCpf(e.cpf),telefoneFormatado:this.formatarTelefone(e.telefone),dataNascimentoFormatado:this.formatarData(e.dataNascimento)}}formatarData(e){if(!e)return"...";let n=e.split("T")[0].split("-");return`${n[2]}/${n[1]}/${n[0]}`}onActionClick(e){e?(console.log("Navegando para:",e),this.router.navigate([e])):console.warn("Nenhuma rota definida para este item.")}};l.\u0275fac=function(n){return new(n||l)(u(E),u(w))},l.\u0275cmp=x({type:l,selectors:[["app-minha-area"]],decls:49,vars:9,consts:[[1,"ion-no-border"],[3,"fullscreen"],[1,"content-padding"],[1,"page-title"],[1,"user-info-card"],["lines","none"],[1,"user-name"],["size","6"],[1,"info-item"],[1,"info-label"],[1,"info-value"],[1,"info-value","email-value"],[1,"action-grid"],["size","6",4,"ngFor","ngForOf"],["button","",1,"action-card",3,"click","disabled"],[1,"item-container"],[1,"action-icon-wrapper"],["aria-hidden","true",3,"name"],[1,"action-label-wrapper"]],template:function(n,r){n&1&&(t(0,"ion-header",0),g(1,"app-cabecalho"),o(),t(2,"ion-content",1)(3,"div",2)(4,"h3",3),i(5,"Minha \xC1rea"),o(),t(6,"ion-card",4)(7,"ion-item",5)(8,"ion-label",6),i(9),o()(),t(10,"ion-grid")(11,"ion-row")(12,"ion-col",7)(13,"div",8)(14,"span",9),i(15,"CNS"),o(),t(16,"span",10),i(17),o()(),t(18,"div",8)(19,"span",9),i(20,"Data de Nascimento"),o(),t(21,"span",10),i(22),o()(),t(23,"div",8)(24,"span",9),i(25,"E-mail"),o(),t(26,"span",11),i(27),o()()(),t(28,"ion-col",7)(29,"div",8)(30,"span",9),i(31,"CPF"),o(),t(32,"span",10),i(33),o()(),t(34,"div",8)(35,"span",9),i(36,"Telefone"),o(),t(37,"span",10),i(38),o()(),t(39,"div",8)(40,"span",9),i(41,"Sexo"),o(),t(42,"span",10),i(43),o()()()()()(),t(44,"ion-grid",12)(45,"ion-row"),_(46,R,8,3,"ion-col",13),o()()()(),t(47,"ion-footer"),g(48,"app-barra-de-abas"),o()),n&2&&(a(2),p("fullscreen",!0),a(7),d(r.userInfo.nome),a(8),d(r.userInfo.cns),a(5),d(r.userInfo.dataNascimento),a(5),d(r.userInfo.email),a(6),d(r.userInfo.cpf),a(5),d(r.userInfo.telefone),a(5),d(r.userInfo.sexo),a(3),p("ngForOf",r.actionItems))},dependencies:[P,I,S,k,z,F,D,$,N,H,y,V,T,A,B,j],styles:["ion-content[_ngcontent-%COMP%]{--background: var(--app-color-white)}.content-padding[_ngcontent-%COMP%]{padding:0 16px 20px}.page-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.1em;color:var(--app-color-primary-dark);margin-bottom:16px;padding-left:4px}.user-info-card[_ngcontent-%COMP%]{--background: #f0f0f0;box-shadow:none;border-radius:8px;margin-bottom:24px;padding:8px 0;margin-left:0;margin-right:0}.user-info-card[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background: transparent;--padding-start: 12px;--padding-end: 12px;--inner-padding-bottom: 4px}.user-info-card[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{font-size:1.1em;font-weight:700;color:var(--app-color-primary-dark);white-space:normal}.user-info-card[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{padding:0 12px 8px}.user-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]{margin-bottom:8px}.user-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-label[_ngcontent-%COMP%]{display:block;font-size:.8em;color:#666;margin-bottom:2px}.user-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .info-value[_ngcontent-%COMP%]{display:block;font-size:.9em;font-weight:500;color:var(--app-color-primary-dark)}.user-info-card[_ngcontent-%COMP%]   .info-item[_ngcontent-%COMP%]   .email-value[_ngcontent-%COMP%]{word-break:break-all}.action-grid[_ngcontent-%COMP%]{padding:0}.action-grid[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%]{padding:6px;display:flex}.action-card[_ngcontent-%COMP%]{--background: var(--app-color-white) !important;background:var(--app-color-white)!important;box-shadow:0 2px 4px #0000001a;border-radius:8px;border:1px solid var(--app-color-card-border);height:100%;width:100%;margin:0;padding:12px;min-height:65px}.action-card[_ngcontent-%COMP%]   .item-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.action-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]{flex-shrink:0;display:flex;align-items:center;justify-content:center;margin-right:12px}.action-card[_ngcontent-%COMP%]   .action-icon-wrapper[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--app-color-primary-dark)!important;font-size:22px}.action-card[_ngcontent-%COMP%]   .action-label-wrapper[_ngcontent-%COMP%]{flex:1;min-width:0}.action-card[_ngcontent-%COMP%]   .action-label-wrapper[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--app-color-primary-dark)!important;font-size:.9em;font-weight:500;white-space:normal;line-height:1.3;margin:0;padding:0}"]});let m=l;return m})();export{ne as MinhaAreaPage};
