import{a as ie,b as oe}from"./chunk-S4FL77LE.js";import{b as O}from"./chunk-DSMJWNAS.js";import{a as ne}from"./chunk-JPPMYTV5.js";import{B as Z,G as ee,I as te,J as E,e as $,g as Q,h as q,i as X,k as T,m as G,n as J,q as K,u as L,v as W,w as Y}from"./chunk-UPVBF2VF.js";import{C as m,D as a,E as r,F as d,L as P,M as f,N as p,R as F,S as V,T as z,V as N,W as D,X as l,Y as u,e as h,ga as U,ha as S,i as x,j as g,la as y,oa as B,pa as H,q as s,r as R,t as k,v as M,w as C,xa as j,z as v}from"./chunk-36HGS4EL.js";import"./chunk-LUUFI6RM.js";import"./chunk-QUJFQN2Y.js";import"./chunk-AHGHMOHV.js";import"./chunk-73NUNHON.js";import"./chunk-4MO7OQZX.js";import"./chunk-M2Y4VNJU.js";import"./chunk-74SSSF5Y.js";import"./chunk-N3KGO5P4.js";import"./chunk-7FY2OE2O.js";import"./chunk-J5AYYYYG.js";import"./chunk-FGNDF6E2.js";import"./chunk-FHHGKWYB.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-ZZTMQJLL.js";import"./chunk-CKP3SGE2.js";import"./chunk-WER6QGNK.js";import"./chunk-WE77HQDE.js";import"./chunk-2GDOKXI3.js";import"./chunk-6O2VLVOF.js";import"./chunk-JVTPOORY.js";import"./chunk-CLDSZD2A.js";import"./chunk-M2X7KQLB.js";import"./chunk-2F44PKVT.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as b}from"./chunk-JHI3MBHO.js";function pe(n,e){if(n&1){let o=P();a(0,"ion-footer",23)(1,"ion-button",24),f("click",function(t){x(o);let c=p(2);return g(c.onCancelClick(t))}),d(2,"ion-icon",25),l(3," Cancelar Exame "),r()()}}function fe(n,e){if(n&1){let o=P();a(0,"ion-footer",26)(1,"ion-button",27),f("click",function(t){x(o);let c=p(2);return g(c.onRemoveClick(t))}),d(2,"ion-icon",28),l(3," Remover do Hist\xF3rico "),r()()}}function xe(n,e){if(n&1&&(a(0,"ion-card",1),d(1,"div",2),a(2,"ion-card-header",3)(3,"div",4),d(4,"ion-icon",5),a(5,"span"),l(6),r(),a(7,"span",6),l(8,"\u2022"),r(),a(9,"span"),l(10),r()(),a(11,"div",7)(12,"ion-chip",8)(13,"ion-label"),l(14),r()()()(),a(15,"ion-card-content",9)(16,"div",10)(17,"div",11),d(18,"ion-icon",12),r(),a(19,"div",13)(20,"h2"),l(21),r(),a(22,"p",14),l(23,"Exame / Procedimento"),r()()(),d(24,"div",15),a(25,"div",16)(26,"div",17),d(27,"ion-icon",18),a(28,"h3"),l(29,"Local de Realiza\xE7\xE3o"),r()(),a(30,"p",19),l(31),r(),a(32,"p",20),l(33),r()()(),v(34,pe,4,0,"ion-footer",21)(35,fe,4,0,"ion-footer",22),r()),n&2){let o=p();N("cancelled",o.exam.status==="Cancelled"),s(6),u(o.formattedDate),s(4),u(o.formattedTime),s(2),D(o.statusClass),s(2),u(o.formattedStatus),s(7),u(o.formattedName),s(10),u(o.exam.healthUnit.name),s(2),u(o.exam.healthUnit.address),s(),m("ngIf",o.exam.status!=="Cancelled"),s(),m("ngIf",o.exam.status==="Cancelled")}}var re=(()=>{let e=class e{constructor(){this.exam=null,this.cancelClicked=new R,this.removeClicked=new R}get formattedName(){return this.exam?.examId?{blood_test:"Exame de Sangue",x_ray_chest:"Raio-X do T\xF3rax",urine_test:"Exame de Urina",covid_test:"Teste de COVID-19",ultrasound:"Ultrassonografia"}[this.exam.examId]||this.exam.examId.replace(/_/g," "):"Exame"}get formattedDate(){if(!this.exam)return"";try{return new Date(this.exam.dateTime).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch{return"--/--/----"}}get formattedTime(){if(!this.exam)return"";try{return new Date(this.exam.dateTime).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}).replace(":","h")}catch{return"--h--"}}get statusClass(){return this.exam?.status?this.exam.status.toLowerCase():""}get formattedStatus(){switch(this.exam?.status){case"Pending":return"Pendente";case"Confirmed":return"Confirmado";case"Cancelled":return"Cancelado";default:return this.exam?.status||""}}onCancelClick(i){i.stopPropagation(),this.cancelClicked.emit(this.exam?._id)}onRemoveClick(i){i.stopPropagation(),this.removeClicked.emit(this.exam?._id)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=M({type:e,selectors:[["app-exam-card"]],inputs:{exam:"exam"},outputs:{cancelClicked:"cancelClicked",removeClicked:"removeClicked"},standalone:!1,decls:1,vars:1,consts:[["class","exam-card",3,"cancelled",4,"ngIf"],[1,"exam-card"],[1,"type-indicator"],[1,"card-header"],[1,"date-time"],["name","calendar-number-outline"],[1,"separator"],[1,"status"],[1,"status-chip"],[1,"card-content"],[1,"exam-highlight"],[1,"exam-icon-circle"],["name","flask-outline"],[1,"exam-info"],[1,"exam-category"],[1,"divider"],[1,"location-info"],[1,"location-header"],["name","business-outline"],[1,"place-name"],[1,"place-address"],["class","card-footer",4,"ngIf"],["class","card-footer card-footer-removed",4,"ngIf"],[1,"card-footer"],["color","danger","fill","clear","size","small",3,"click"],["name","close-circle-outline","slot","start"],[1,"card-footer","card-footer-removed"],["color","medium","fill","clear","size","small",3,"click"],["name","trash-outline","slot","start"]],template:function(t,c){t&1&&v(0,xe,36,12,"ion-card",0),t&2&&m("ngIf",c.exam)},dependencies:[S,$,Q,q,X,T,J,K,L],styles:[".exam-card[_ngcontent-%COMP%]{margin:12px 16px;border-radius:12px;background:#fff;position:relative;overflow:hidden;transition:all .3s ease}.exam-card[_ngcontent-%COMP%]   .type-indicator[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;width:6px;background-color:#6495ed;z-index:1}.exam-card.cancelled[_ngcontent-%COMP%]{opacity:.7;filter:grayscale(.8)}.exam-card.cancelled[_ngcontent-%COMP%]   .type-indicator[_ngcontent-%COMP%]{background:var(--ion-color-medium)}.card-header[_ngcontent-%COMP%]{width:100%;flex-direction:row;padding:12px 16px 8px 22px;display:flex;justify-content:space-between;align-items:center;flex-wrap:nowrap;background:transparent}.card-header[_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:.9rem;color:var(--ion-color-dark);font-weight:600}.card-header[_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1.1rem;margin-right:6px;color:var(--ion-color-tertiary)}.card-header[_ngcontent-%COMP%]   .date-time[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin:0 8px;color:#ccc}.card-header[_ngcontent-%COMP%]   .status-chip[_ngcontent-%COMP%]{height:24px;font-size:.75rem;font-weight:700;margin:0;border-radius:16px;border:none}.card-header[_ngcontent-%COMP%]   .status-chip.pending[_ngcontent-%COMP%]{--background: #ffc409;--color: #000000}.card-header[_ngcontent-%COMP%]   .status-chip.confirmed[_ngcontent-%COMP%]{--background: #2dd36f;--color: #ffffff}.card-header[_ngcontent-%COMP%]   .status-chip.cancelled[_ngcontent-%COMP%]{--background: #eb445a;--color: #ffffff}.card-content[_ngcontent-%COMP%]{padding:8px 16px 16px 22px}.card-content[_ngcontent-%COMP%]   .exam-highlight[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:16px}.card-content[_ngcontent-%COMP%]   .exam-highlight[_ngcontent-%COMP%]   .exam-icon-circle[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:50%;background-color:#6495ed;display:flex;align-items:center;justify-content:center;margin-right:12px;flex-shrink:0}.card-content[_ngcontent-%COMP%]   .exam-highlight[_ngcontent-%COMP%]   .exam-icon-circle[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:var(--ion-color-tertiary)}.card-content[_ngcontent-%COMP%]   .exam-highlight[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.1rem;font-weight:700;color:var(--ion-color-dark);line-height:1.2}.card-content[_ngcontent-%COMP%]   .exam-highlight[_ngcontent-%COMP%]   .exam-info[_ngcontent-%COMP%]   .exam-category[_ngcontent-%COMP%]{margin:2px 0 0;font-size:.8rem;color:var(--ion-color-medium);text-transform:uppercase;letter-spacing:.5px}.card-content[_ngcontent-%COMP%]   .divider[_ngcontent-%COMP%]{height:1px;background-color:var(--ion-color-light-shade);margin-bottom:12px}.card-content[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px}.card-content[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-medium);margin-right:6px}.card-content[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .location-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:.85rem;font-weight:600;color:var(--ion-color-medium-shade);text-transform:uppercase}.card-content[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .place-name[_ngcontent-%COMP%]{margin:0 0 2px 22px;font-size:.95rem;font-weight:600;color:var(--ion-color-dark)}.card-content[_ngcontent-%COMP%]   .location-info[_ngcontent-%COMP%]   .place-address[_ngcontent-%COMP%]{margin:0 0 0 22px;font-size:.85rem;color:var(--ion-color-medium)}.card-footer[_ngcontent-%COMP%]{padding:4px 8px;display:flex;justify-content:flex-end}.card-footer.card-footer-removed[_ngcontent-%COMP%]{justify-content:center}"]});let n=e;return n})();function ue(n,e){if(n&1){let o=P();a(0,"div",4)(1,"ion-label",5),l(2,"Filtrar por:"),r(),a(3,"div",6)(4,"ion-chip",7),f("click",function(){x(o);let t=p();return g(t.selecionarFiltro("Todos"))}),a(5,"ion-label"),l(6,"Todos"),r()(),a(7,"ion-chip",8),f("click",function(){x(o);let t=p();return g(t.selecionarFiltro("Pending"))}),a(8,"ion-label"),l(9,"Pendentes"),r()(),a(10,"ion-chip",9),f("click",function(){x(o);let t=p();return g(t.selecionarFiltro("Confirmed"))}),a(11,"ion-label"),l(12,"Confirmados"),r()(),a(13,"ion-chip",10),f("click",function(){x(o);let t=p();return g(t.selecionarFiltro("Cancelled"))}),a(14,"ion-label"),l(15,"Cancelados"),r()()()()}if(n&2){let o=p();s(4),m("outline",o.filtroStatusAtivo!=="Todos"),s(3),m("outline",o.filtroStatusAtivo!=="Pending"),s(3),m("outline",o.filtroStatusAtivo!=="Confirmed"),s(3),m("outline",o.filtroStatusAtivo!=="Cancelled")}}function _e(n,e){n&1&&(a(0,"div",11),d(1,"ion-spinner"),r())}function he(n,e){n&1&&(a(0,"div",14)(1,"p"),l(2,"Voc\xEA n\xE3o possui exames agendados."),r()())}function Ce(n,e){n&1&&(a(0,"div",14)(1,"p"),l(2,"Nenhum exame encontrado para este filtro."),r()())}function ve(n,e){if(n&1){let o=P();a(0,"app-exam-card",17),f("cancelClicked",function(t){x(o);let c=p(3);return g(c.promptCancelar(t))})("removeClicked",function(t){x(o);let c=p(3);return g(c.promptRemover(t))}),r()}if(n&2){let o=e.$implicit;m("exam",o)}}function Me(n,e){if(n&1&&(a(0,"div",15),v(1,ve,1,1,"app-exam-card",16),r()),n&2){let o=p(2);s(),m("ngForOf",o.examesExibidos)}}function Pe(n,e){if(n&1&&(a(0,"div"),v(1,he,3,0,"div",12)(2,Ce,3,0,"div",12)(3,Me,2,1,"div",13),r()),n&2){let o=p();s(),m("ngIf",o.examesMaster.length===0),s(),m("ngIf",o.examesMaster.length>0&&o.examesExibidos.length===0),s(),m("ngIf",o.examesExibidos.length>0)}}var A=(()=>{let e=class e{constructor(i,t,c){this.http=i,this.alertController=t,this.toastController=c,this.titulo="Exames Agendados",this.API_URL=ne,this.examesMaster=[],this.examesExibidos=[],this.filtroStatusAtivo="Todos",this.isLoading=!1}ngOnInit(){this.carregarExames()}carregarExames(i=null){this.isLoading=!0;let t=`${this.API_URL}/exams`;this.http.get(t,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).subscribe({next:c=>{this.examesMaster=c.sort((_,w)=>new Date(_.dateTime).getTime()-new Date(w.dateTime).getTime()),this.aplicarFiltro(),this.isLoading=!1,i&&i.target.complete()},error:c=>{console.error("Erro exames",c),this.isLoading=!1,i&&i.target.complete(),this.mostrarToast("Erro ao carregar exames.","danger")}})}aplicarFiltro(){this.filtroStatusAtivo==="Todos"?this.examesExibidos=[...this.examesMaster]:this.examesExibidos=this.examesMaster.filter(i=>i.status===this.filtroStatusAtivo)}selecionarFiltro(i){this.filtroStatusAtivo=i,this.aplicarFiltro()}promptCancelar(i){return b(this,null,function*(){yield(yield this.alertController.create({header:"Cancelar Exame",message:"Tem certeza que deseja cancelar este exame?",buttons:[{text:"N\xE3o",role:"cancel"},{text:"Sim",handler:()=>this.executarAcao(i,"cancel")}]})).present()})}promptRemover(i){return b(this,null,function*(){yield(yield this.alertController.create({header:"Remover do Hist\xF3rico",message:"Deseja remover este exame da lista?",buttons:[{text:"N\xE3o",role:"cancel"},{text:"Sim",handler:()=>this.executarAcao(i,"delete")}]})).present()})}executarAcao(i,t){let c=`${this.API_URL}/exams/${i}`;(t==="delete"?this.http.delete(c,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}):this.http.patch(c,{status:"Cancelled"},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).subscribe({next:()=>{this.mostrarToast(t==="delete"?"Removido com sucesso":"Cancelado com sucesso","success"),t==="delete"?(this.examesMaster=this.examesMaster.filter(w=>w._id!==i),this.aplicarFiltro()):this.carregarExames()},error:()=>this.mostrarToast("Erro ao processar a\xE7\xE3o.","danger")})}mostrarToast(i,t){return b(this,null,function*(){(yield this.toastController.create({message:i,duration:2500,color:t,position:"top"})).present()})}};e.\u0275fac=function(t){return new(t||e)(k(B),k(ee),k(te))},e.\u0275cmp=M({type:e,selectors:[["app-lista-exames"]],inputs:{titulo:"titulo"},standalone:!1,decls:6,vars:4,consts:[[1,"section"],["class","filter-container",4,"ngIf"],["class","loading-container",4,"ngIf"],[4,"ngIf"],[1,"filter-container"],[1,"filter-label"],[1,"filter-chips"],[3,"click","outline"],["color","warning",3,"click","outline"],["color","success",3,"click","outline"],["color","danger",3,"click","outline"],[1,"loading-container"],["class","empty-state",4,"ngIf"],["class","exam-list",4,"ngIf"],[1,"empty-state"],[1,"exam-list"],[3,"exam","cancelClicked","removeClicked",4,"ngFor","ngForOf"],[3,"cancelClicked","removeClicked","exam"]],template:function(t,c){t&1&&(a(0,"div",0)(1,"h3"),l(2),r(),v(3,ue,16,4,"div",1)(4,_e,2,0,"div",2)(5,Pe,4,3,"div",3),r()),t&2&&(s(2),u(c.titulo),s(),m("ngIf",!c.isLoading&&c.examesMaster.length>0),s(),m("ngIf",c.isLoading),s(),m("ngIf",!c.isLoading))},dependencies:[U,S,T,L,Z,re],styles:[".section[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px;margin-bottom:24px}.section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:1.1em;color:var(--app-color-primary-dark);margin:0 0 8px}.filter-label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;color:var(--ion-color-medium-shade);display:block;margin-bottom:4px}.filter-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-bottom:8px}.filter-chips[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{height:26px;font-size:.75rem;margin-right:6px;margin-bottom:4px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100px}.empty-state[_ngcontent-%COMP%]{padding:20px;text-align:center;color:var(--ion-color-medium)}"]});let n=e;return n})();var ce=(()=>{let e=class e{constructor(){}handleRefresh(i){this.listaAgendamentos?this.listaAgendamentos.carregarAgendamentos(i):this.listaExames?this.listaExames.carregarExames(i):setTimeout(()=>i.target.complete(),500)}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=M({type:e,selectors:[["app-meus-agendamentos"]],viewQuery:function(t,c){if(t&1&&(F(O,5),F(A,5)),t&2){let _;V(_=z())&&(c.listaAgendamentos=_.first),V(_=z())&&(c.listaExames=_.first)}},standalone:!1,decls:6,vars:2,consts:[["titulo","Meus Agendamentos"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[3,"titulo"],["titulo","Meus Exames"]],template:function(t,c){t&1&&(d(0,"app-simple-header",0),a(1,"ion-content",1)(2,"ion-refresher",2),f("ionRefresh",function(w){return c.handleRefresh(w)}),d(3,"ion-refresher-content"),r(),d(4,"app-lista-agendamentos",3)(5,"app-lista-exames",4),r()),t&2&&(s(),m("fullscreen",!0),s(3),m("titulo","Minhas Consultas"))},dependencies:[G,W,Y,O,A,ie],styles:["ion-toolbar[_ngcontent-%COMP%]{--background: var(--app-color-header-bg);padding-top:16px;padding-bottom:16px;display:flex;justify-content:center;align-items:center;margin-bottom:16px}ion-title[_ngcontent-%COMP%]{color:var(--app-color-primary-dark);font-weight:700}ion-back-button[_ngcontent-%COMP%]{color:var(--app-color-primary-dark)}"]});let n=e;return n})();var Ee=[{path:"",component:ce}],se=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=C({type:e}),e.\u0275inj=h({imports:[j.forChild(Ee),j]});let n=e;return n})();var le=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=C({type:e}),e.\u0275inj=h({imports:[y,E]});let n=e;return n})();var me=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=C({type:e}),e.\u0275inj=h({imports:[y,E,H,le]});let n=e;return n})();var rt=(()=>{let e=class e{};e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=C({type:e}),e.\u0275inj=h({imports:[y,E,se,O,me,oe]});let n=e;return n})();export{rt as MeusAgendamentosPageModule};
